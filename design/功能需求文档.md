# DelayBuy 功能需求文档

## 1. Must Have 功能（核心功能）

1. **延迟购买机制**

   - 用户故事：作为一名用户，我可以将心仪商品添加到延迟清单，并设置延迟期，倒计时结束后再决定是否购买。
   - 验收标准：用户可自定义延迟天数，商品到期前无法直接购买，倒计时结束后收到提醒。
   - 开发优先级：最高

2. **冲动干预提醒**

   - 用户故事：作为一名用户，在延迟期间我会收到心理干预问题或理性思考提醒，帮助我冷静决策。
   - 验收标准：延迟期内定时推送干预提醒，内容可配置。
   - 开发优先级：高

3. **消费决策记录**

   - 用户故事：作为一名用户，每次做出“买/不买”决策时可以记录原因，形成个人消费行为档案。
   - 验收标准：每次决策后可填写原因，历史决策可查询。
   - 开发优先级：高

4. **节省金额统计**

   - 用户故事：作为一名用户，我希望看到因延迟未购买商品累计节省的金额。
   - 验收标准：自动统计未购买商品的总金额，支持周期统计。
   - 开发优先级：中

5. **智能分析与激励**
   - 用户故事：作为一名用户，我希望获得消费习惯分析和成就激励，提升自控力。
   - 验收标准：可视化消费行为，达成目标后获得成就徽章或激励。
   - 开发优先级：中

## 2. Should Have 功能（重要功能）

1. **商品图片与备注**
   - 用户故事：作为一名用户，我可以为每个商品添加图片（每商品最多 3 张，每备注最多 5 张）和备注，便于回忆和管理。
   - 验收标准：支持图片上传（数量限制）与文本备注。
   - 开发优先级：中

## 3. 会员专属增值功能（DelayBuy Plus）

1. **多平台同步**

   - 用户故事：作为会员用户，我希望在不同设备间同步我的延迟清单和决策记录。
   - 验收标准：支持账号登录与数据云同步。
   - 开发优先级：高

2. **AI 智能推荐**

   - 用户故事：作为会员用户，我希望获得 AI 推荐的理性消费建议、替代方案和深度消费分析。
   - 验收标准：根据用户行为推送个性化建议和分析报告。
   - 开发优先级：高

3. **高级统计分析**

   - 用户故事：作为会员用户，我希望获得更全面的消费习惯趋势、个性化报告等深度分析。
   - 验收标准：可视化消费趋势、周期对比、个性化建议等。
   - 开发优先级：中

4. **专属成就/激励体系**
   - 用户故事：作为会员用户，我希望获得专属徽章、成长任务等高级激励。
   - 验收标准：会员可解锁专属成就、获得额外激励。
   - 开发优先级：中

**输出人：GitHub Copilot**
**日期：2025-07-22**

---

## 4. 数据同步与本地/云端混合场景开发指导

### 产品经理建议

- 首次检测到本地未同步数据时弹窗提示，后续不重复打扰，设置页提供“本地数据管理”入口。
- 默认自动同步本地数据到云端，后台静默处理，成功后仅轻提示“数据已同步”。
- 仅在同步失败或数据冲突时弹窗提示用户选择处理方案。
- 本地数据列表用标签标记“已同步/未同步”，提升透明度。
- 设置页允许用户自定义“同步提醒”开关。

### 技术经理建议

- 本地与云端数据建立 local_id <-> id 映射，后续操作优先走云端，避免重复和冲突。
- 同步完成后不强制清除本地数据，建议用户手动管理或一段时间后自动清理。
- 支持本地数据导出/备份，增强安全感。
- 多端/多设备同步时，需处理数据冲突，建议提示用户选择或自动合并。
- 本地付费权益需本地保存，云端定期校验。

### 推荐开发实践

1. 首次同步弹窗，后续静默自动同步。
2. 本地与云端数据映射，优先云端操作。
3. 本地数据管理入口和导出功能。
4. 冲突/异常时弹窗提示，正常流程轻提示。
5. 付费权益本地保障，云端校验。
6. AI 相关功能在初版不要开发，因为和主要功能关联性不大，放到 pro 版中。

---

## 5. 主要页面功能点与用户交互细化

### 5.1 首页（HomePage）

**主要展示模块与功能说明：**

1. **顶部标题栏与免费试用 icon**

   - [x] 左侧为统一的图标+标题，保持与其他 tab 页一致。
   - [ ] 免费试用 icon 仅作展示，非按钮。若用户已购买产品，则显示其他标识【需设计开发，登录注册 vip】。

2. **Trial Limit Notice（试用限制提示）**

   - [x] 主要用于提醒用户注册/购买。
   - [x] 该提示也是登录、注册或购买的入口。
   - [ ]【点击后弹框，需特别注意收费原因的话术设计】。

3. **延迟商品列表（支持置顶，卡片样式）**

   - 主要功能区。
   - [x] 【在列表标题处新增“添加商品”icon 按钮，删除原有列表最后一项的添加快捷入口】。 done
   - [x] 【提供“屏蔽非倒计时商品”按钮，便于用户只查看倒计时中的商品】。 
   - [x] 【屏蔽决策后商品，避免加载数据太杂，这个功能也挺重要，是用户长期使用的保证。】
   - 每个商品卡片包含：
     1. [x] 长按置顶/取消置顶功能
     2. [x] 点击进入详情页面
     3. 三个快捷按钮：
        - [x] 添加 note：【底部弹框快速添加】
        - [x] 换成提前决策的功能，需要设计成一个弹框，提供给用户两个选择
        - [ ] 菜单：【以卡片形式分享到主流社交平台（需兼容国内外平台）】
     4. [ ] 【每天一个小的反思标语】
     5. [ ] 【考虑添加一个照片展示，添加到这个卡片布局中，需要设计，暂时不做】
     6. [x] 【在置顶标记旁边再添加一个预算百分比】
     7. [x] 【1、等待决策时卡片样式； 2、决策完卡片样式】
     

4. **快速添加入口**

   - [x] 【无商品时：页面展示“添加商品”按钮，点击跳转到添加页面。
   - [x] 【有商品时：在页面浮动一个添加按钮】。

5. **AI/高级统计卡片（仅会员登录后显示）** 【暂时不做AI接入】
   - 预留功能区，后续为 VIP 用户提供更多信息或交互。
   - 可考虑提供 chat 入口，实现简单 AI 交互。

---

### 5.2 添加商品页（HomeItemPage）

**主要展示模块：**

1. **页面标题与返回按钮**

   - [x] 标题栏显示当前页面名称，左侧为返回按钮，返回首页。
   - [x] 既然后面有免费试用提示，这里标题就不应该带上数字。【删除数字】

2. **Trial Notice（试用提示卡片）**

   - [x] 展示试用限制或注册/购买提示。【多语言配置存在问题】
   - [x] 显示免费添加的卡片数量。

3. **核心信息表单**

   - [x] 商品名、价格、延迟天数等必填项。【还需要一个非必须项，就是商品照片，商品维度如果没有照片，可以获取之后的 note 里面的图片作为商品图片】
   - [x] 可选详情（这个 note 数据模型需要再好好考虑一下）
     文字+图片足够记录用户需要的信息，保持极简和高效。【note 这个可以封装为 widget 组件】
     【去除预算按钮选项】
     说明数据存储方式或隐私提示。【这个提示需要看用户是不是登录和 vip，提示可以变化】

---

### 5.3 商品详情页（HomeItemDetailPage）

**主要展示模块：**

1. **页面标题与返回按钮**

   - [x] 标题 + 编辑按钮【编辑按钮展示需要调整】
   - [x] 编辑功能使用底部弹框，可以编辑基础字段：产品名称、价格；

2. **商品头部信息**

   - [ ] 展示商品图片、名称、价格等基础信息。【图片添加一个相机 icon，可以点击】
   - [ ] 区分不同状态下的头部信息样式

3. **倒计时卡片**

   - [ ] 【展示倒计时的卡片再好好设计一下，添加一个延期的功能按钮】
   - [x] 【添加一个设置预算的输入框，样式需要设计，可以输入预算，是一个可选的操作】
   - [ ] 【区分不同状态下的卡片样式，需要UI设计】

4. **可选详情**

   - [x] 展示 note(文字+图片)【去掉预算状态的标签】。
   - [ ] 添加 note 按钮【以底部弹框的形式让用户添加，这个功能也可以给到 homepage 页面使用】【不同状态需要校验】

5. **延迟信息**

   - [x] 展示添加时间+等待周期+决策时间

6. **决策操作区**
   - [ ] 三个按钮：【已购买按钮+跳过按钮+删除，其中删除按钮可以 icon 按钮，前面两个按钮以 icon+文字的形式展示，可以弱化删除按钮】
   - [ ] 已经决策的详情页需要重新设计底部按键功能；

7. **设置预算**
   - [x] 添加设置按钮，底部弹框表单填入自己的预算。

---

### 5.4 商品决策页（HomeItemDecisionPage）

> 这个页面需要好好考虑：1、是否和详情页并列，通过状态区分进入哪个页面；2、是否可以和详情页合并，重新设计样式，通过状态进行展示；3、考虑在列表中卡片的样式；
> **主要展示模块：**

决策表单
买/不买选择，填写决策原因。
决策历史展示
展示历史决策记录。
返回按钮
返回商品详情页。

---

### 5.5 数据统计页（StatsPage）

**主要展示模块：**

消费统计信息
节省金额、成功率、消费趋势等可视化数据。
周期对比与个性化建议
展示周期性消费对比、AI 分析建议（VIP 功能）。
成就与激励
展示用户成就徽章、成长任务等。

---

### 5.5 设置页（SettingsPage）

**主要展示模块：**

本地数据管理入口
进入本地数据管理页面。
同步状态标签
显示数据同步状态（已同步/未同步）。
同步提醒开关
用户可自定义是否弹窗提醒。
数据导出/备份入口
支持本地数据导出与备份。

---

> 以上内容以页面为维度，细化了每个页面的主要功能点和用户交互，便于后续开发和测试。
